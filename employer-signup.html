<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vitable - Health Benefits for Your Team</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --grey-9: #1B1C1E;
      --grey-7: #4A4A4A;
      --grey-6: #757575;
      --grey-5: #999;
      --grey-4: #DEDEDE;
      --grey-3: #EBEBEB;
      --grey-2: #F6F7F7;
      --grey-1: #FAFAFA;
      --white: #FFFFFF;
      --teal: #4299A6;
      --teal-dark: #367f8a;
      --teal-light: rgba(66, 153, 166, 0.08);
      --teal-mid: rgba(66, 153, 166, 0.15);
      --red: #FF4343;
      --red-light: #FFF0F0;
      --green: #22C55E;
      --green-light: #F0FDF4;
      --green-dark: #16a34a;
      --amber: #F59E0B;
      --amber-light: #FFFBEB;
      --purple: #8B5CF6;
      --purple-light: #F5F3FF;
      --shadow: 0px 4px 60px 0px rgba(0,0,0,0.04);
      --shadow-md: 0px 8px 30px rgba(0,0,0,0.08);
      --shadow-lg: 0px 12px 40px rgba(0,0,0,0.12);
      --font: 'Rethink Sans', sans-serif;
      --radius-full: 100px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --radius-pill: 24px;
    }

    body { font-family: var(--font); background: var(--grey-1); color: var(--grey-9); min-height: 100vh; overflow-x: hidden; }

    /* BG */
    .bg-circle { position: absolute; border-radius: 50%; z-index: 0; pointer-events: none; }
    .bg-c1 { width: 300px; height: 300px; background: var(--teal-light); top: 60px; right: -80px; }
    .bg-c2 { width: 180px; height: 180px; background: rgba(66,153,166,0.05); top: 480px; right: 200px; }
    .bg-c3 { width: 260px; height: 260px; background: var(--teal-light); bottom: 100px; left: -100px; }

    .page-wrap { position: relative; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }

    /* HEADER */
    .header { width: 1180px; max-width: calc(100% - 32px); display: flex; align-items: center; justify-content: space-between; background: var(--white); border: 1px solid var(--grey-2); border-radius: var(--radius-full); padding: 6px 6px 6px 16px; box-shadow: var(--shadow); margin-top: 16px; position: relative; z-index: 20; }
    .logo { display: flex; align-items: center; gap: 8px; text-decoration: none; }
    .logo svg { height: 36px; }
    .logo-text { font-size: 22px; font-weight: 700; color: var(--grey-9); }
    .header-right { display: flex; align-items: center; gap: 8px; }
    .header-save { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 500; color: var(--grey-6); padding: 0 8px; }
    .header-save .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); }
    .btn-pill { display: flex; align-items: center; gap: 6px; background: var(--white); border: 1px solid var(--grey-4); border-radius: var(--radius-full); padding: 6px 18px; height: 36px; font-family: var(--font); font-weight: 600; font-size: 13px; color: var(--grey-9); cursor: pointer; white-space: nowrap; text-decoration: none; }
    .btn-pill:hover { background: var(--grey-2); }

    /* PROGRESS */
    .progress-wrap { width: 720px; max-width: calc(100% - 32px); margin-top: 28px; z-index: 10; position: relative; }
    .progress-track { display: flex; align-items: flex-start; justify-content: space-between; position: relative; }
    .progress-track::before { content: ''; position: absolute; top: 16px; left: 48px; right: 48px; height: 2px; background: var(--grey-4); }
    .progress-track::after { content: ''; position: absolute; top: 16px; left: 48px; height: 2px; background: var(--teal); transition: width 0.4s ease; width: var(--prog, 0%); }
    .p-step { display: flex; flex-direction: column; align-items: center; gap: 6px; z-index: 2; min-width: 72px; }
    .p-dot { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 700; border: 2px solid var(--grey-4); background: var(--white); color: var(--grey-6); transition: all 0.3s; }
    .p-step.active .p-dot { border-color: var(--teal); background: var(--teal); color: var(--white); }
    .p-step.done .p-dot { border-color: var(--teal); background: var(--teal); color: var(--white); }
    .p-step.clickable { cursor: pointer; }
    .p-label { font-size: 11px; font-weight: 500; color: var(--grey-6); text-align: center; white-space: nowrap; }
    .p-step.active .p-label, .p-step.done .p-label { color: var(--teal); font-weight: 600; }

    /* MAIN */
    .main { width: 720px; max-width: calc(100% - 32px); display: flex; flex-direction: column; gap: 20px; margin-top: 20px; z-index: 5; position: relative; flex: 1; padding-bottom: 24px; }
    .main-wide { width: 800px; }
    .hero { text-align: center; }
    .hero h1 { font-size: 34px; font-weight: 800; line-height: 1.15; margin-bottom: 6px; }
    .hero h1 .teal { color: var(--teal); }
    .hero p { font-size: 15px; font-weight: 500; color: var(--grey-6); line-height: 1.5; max-width: 480px; margin: 0 auto; }
    .hero .time-est { display: inline-flex; align-items: center; gap: 6px; background: var(--teal-light); color: var(--teal); font-size: 13px; font-weight: 600; padding: 4px 14px; border-radius: var(--radius-full); margin-top: 12px; }

    /* CARD */
    .card { width: 100%; background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow); padding: 28px; }
    .card-sm { padding: 20px; }
    .card-title { font-size: 17px; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
    .card-title .badge { font-size: 11px; font-weight: 600; color: var(--teal); background: var(--teal-light); padding: 2px 10px; border-radius: var(--radius-full); }
    .card-desc { font-size: 13px; color: var(--grey-6); margin-top: -12px; margin-bottom: 20px; line-height: 1.5; }

    /* FORMS */
    .row { display: flex; gap: 12px; margin-bottom: 16px; }
    .row:last-child { margin-bottom: 0; }
    .col { flex: 1; display: flex; flex-direction: column; gap: 5px; }
    .col.sm { flex: 0 0 120px; }
    .col label { font-weight: 600; font-size: 13px; color: var(--grey-9); }
    .col label .req { color: var(--red); }
    .col label .opt { color: var(--grey-6); font-weight: 400; }
    .inp { width: 100%; height: 44px; border: 1px solid var(--grey-4); border-radius: var(--radius-pill); padding: 0 16px; font-family: var(--font); font-size: 14px; color: var(--grey-9); background: var(--white); outline: none; transition: border-color 0.2s; }
    .inp::placeholder { color: #B0B0B0; }
    .inp:focus { border-color: var(--teal); }
    .inp.err { border-color: var(--red); background: var(--red-light); }
    .inp.lg { height: 52px; font-size: 16px; padding: 0 20px; }
    .err-msg { font-size: 11px; color: var(--red); font-weight: 500; }
    textarea.inp { height: 80px; border-radius: var(--radius-md); resize: none; padding: 10px 16px; }

    /* Currency */
    .cur-wrap { position: relative; }
    .cur-wrap .cur-sym { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 14px; color: var(--grey-6); pointer-events: none; }
    .cur-wrap .inp { padding-left: 26px; }

    /* DROPDOWN */
    .dd-wrap { position: relative; }
    .dd-trig { width: 100%; height: 44px; border: 1px solid var(--grey-4); border-radius: var(--radius-pill); padding: 0 14px; font-family: var(--font); font-size: 14px; color: var(--grey-9); background: var(--white); display: flex; align-items: center; justify-content: space-between; cursor: pointer; user-select: none; transition: border-color 0.2s; }
    .dd-trig.ph { color: #B0B0B0; }
    .dd-trig:hover { border-color: var(--grey-6); }
    .dd-trig.open { border-color: var(--teal); }
    .dd-trig.err { border-color: var(--red); background: var(--red-light); }
    .dd-trig svg { flex-shrink: 0; transition: transform 0.2s; }
    .dd-trig.open svg { transform: rotate(180deg); }
    .dd-menu { position: absolute; top: calc(100% + 4px); left: 0; width: 100%; min-width: 150px; background: var(--white); border: 1px solid var(--grey-4); border-radius: 10px; padding: 4px; box-shadow: var(--shadow-md); z-index: 200; max-height: 220px; overflow-y: auto; }
    .dd-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; border-radius: 6px; font-size: 14px; cursor: pointer; }
    .dd-item:hover, .dd-item.sel { background: var(--grey-2); }

    /* SOCIAL PROOF */
    .social-proof { text-align: center; padding: 16px 0; }
    .social-proof .label { font-size: 12px; font-weight: 500; color: var(--grey-5); text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 14px; }
    .logo-row { display: flex; align-items: center; justify-content: center; gap: 32px; flex-wrap: wrap; opacity: 0.5; }
    .logo-row span { font-size: 15px; font-weight: 700; color: var(--grey-6); letter-spacing: -0.3px; }

    .stats-row { display: flex; gap: 12px; justify-content: center; margin-top: 16px; }
    .stat-chip { display: flex; align-items: center; gap: 6px; background: var(--white); border: 1px solid var(--grey-3); border-radius: var(--radius-full); padding: 6px 14px; font-size: 13px; font-weight: 500; color: var(--grey-7); }
    .stat-chip strong { font-weight: 800; color: var(--grey-9); }

    /* SAVINGS BANNER */
    .savings-banner { display: flex; align-items: center; gap: 16px; background: linear-gradient(135deg, #F0FDF4, #ECFDF5); border: 1px solid rgba(34,197,94,0.2); border-radius: var(--radius-md); padding: 16px 20px; }
    .savings-banner .icon { width: 44px; height: 44px; background: var(--green); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .savings-banner .text { flex: 1; }
    .savings-banner .text .big { font-size: 20px; font-weight: 800; color: var(--green-dark); }
    .savings-banner .text .sub { font-size: 13px; color: var(--grey-7); margin-top: 2px; }

    /* QUICK START FORM */
    .quick-form { display: flex; gap: 10px; align-items: flex-end; }
    .quick-form .col { gap: 4px; }
    .quick-form .col label { font-size: 12px; color: var(--grey-6); }

    /* PRICING CARDS */
    .pricing-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
    .price-card { border: 2px solid var(--grey-4); border-radius: var(--radius-md); padding: 20px; cursor: pointer; transition: all 0.2s; position: relative; }
    .price-card:hover { border-color: var(--grey-6); }
    .price-card.selected { border-color: var(--teal); background: var(--teal-light); }
    .price-card.popular::before { content: 'Most popular'; position: absolute; top: -10px; right: 16px; background: var(--teal); color: white; font-size: 11px; font-weight: 700; padding: 2px 10px; border-radius: var(--radius-full); }
    .price-name { font-size: 18px; font-weight: 700; margin-bottom: 4px; }
    .price-amount { font-size: 28px; font-weight: 800; color: var(--teal); margin-bottom: 2px; }
    .price-amount span { font-size: 14px; font-weight: 500; color: var(--grey-6); }
    .price-desc { font-size: 13px; color: var(--grey-6); margin-bottom: 12px; }
    .price-note { font-size: 12px; color: var(--grey-6); margin-top: 10px; font-style: italic; }
    .price-features { list-style: none; }
    .price-features li { display: flex; align-items: flex-start; gap: 8px; font-size: 13px; color: var(--grey-7); padding: 3px 0; }
    .price-features li svg { flex-shrink: 0; margin-top: 2px; }

    /* EMPLOYEE ROW */
    .emp-row { display: flex; gap: 8px; align-items: flex-end; margin-bottom: 8px; }
    .emp-row .col { gap: 4px; }
    .emp-row .col label { font-size: 12px; }
    .emp-row .inp { height: 40px; font-size: 13px; }
    .emp-row .remove-btn { flex-shrink: 0; width: 40px; height: 40px; border: 1px solid var(--grey-4); border-radius: 50%; display: flex; align-items: center; justify-content: center; background: var(--white); cursor: pointer; transition: all 0.2s; }
    .emp-row .remove-btn:hover { border-color: var(--red); background: var(--red-light); }

    /* INFO BOX */
    .info-box { display: flex; gap: 12px; padding: 14px 16px; border-radius: var(--radius-md); font-size: 13px; line-height: 1.5; margin-bottom: 16px; }
    .info-box.teal { background: var(--teal-light); border: 1px solid var(--teal-mid); color: var(--grey-9); }
    .info-box.amber { background: var(--amber-light); border: 1px solid rgba(245,158,11,0.2); color: var(--grey-9); }
    .info-box.green { background: var(--green-light); border: 1px solid rgba(34,197,94,0.2); color: var(--grey-9); }
    .info-box.purple { background: var(--purple-light); border: 1px solid rgba(139,92,246,0.2); color: var(--grey-9); }
    .info-box svg { flex-shrink: 0; margin-top: 1px; }
    .info-box strong { font-weight: 700; }

    /* COST STRIP */
    .cost-strip { display: flex; align-items: center; justify-content: space-between; background: var(--teal-light); border: 1px solid var(--teal-mid); border-radius: var(--radius-md); padding: 14px 20px; margin: 12px 0; }
    .cost-strip .label { font-size: 14px; font-weight: 500; }
    .cost-strip .label small { color: var(--grey-6); font-weight: 400; }
    .cost-strip .amount { font-size: 22px; font-weight: 800; color: var(--teal); }

    /* TOGGLE */
    .seg-toggle { display: inline-flex; background: var(--grey-2); border-radius: var(--radius-pill); padding: 3px; margin-bottom: 16px; }
    .seg-btn { padding: 7px 18px; border-radius: 22px; font-family: var(--font); font-size: 13px; font-weight: 600; color: var(--grey-6); background: transparent; border: none; cursor: pointer; transition: all 0.25s; }
    .seg-btn.on { background: var(--white); color: var(--grey-9); box-shadow: 0 1px 4px rgba(0,0,0,0.08); }

    /* RADIO */
    .radio-row { display: flex; gap: 12px; margin-bottom: 16px; }
    .radio-opt { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px; font-weight: 500; }
    .r-dot { width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--grey-4); display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: border-color 0.2s; }
    .r-dot.on { border-color: var(--teal); }
    .r-dot.on::after { content: ''; width: 10px; height: 10px; border-radius: 50%; background: var(--teal); }

    /* CHECKBOX */
    .chk-row { display: flex; align-items: flex-start; gap: 10px; cursor: pointer; margin: 16px 0; }
    .chk-box { width: 20px; height: 20px; border: 2px solid var(--grey-4); border-radius: 4px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.2s; }
    .chk-box.on { background: var(--teal); border-color: var(--teal); }
    .chk-text { font-size: 13px; color: var(--grey-6); line-height: 1.5; }
    .chk-text a { color: var(--teal); font-weight: 600; }

    /* DIVIDER */
    .divider { height: 1px; background: var(--grey-4); margin: 20px 0; }

    /* EMPLOYEE CLASS CARD */
    .cls-card { border: 1px solid var(--grey-4); border-radius: var(--radius-md); padding: 16px; margin-bottom: 12px; }
    .cls-hdr { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
    .cls-hdr h4 { font-size: 15px; font-weight: 700; }

    /* AGE TABLE */
    .age-tbl { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
    .age-tbl th { font-size: 11px; font-weight: 600; color: var(--grey-6); text-align: left; padding: 6px 6px 6px 0; border-bottom: 1px solid var(--grey-4); text-transform: uppercase; letter-spacing: 0.5px; }
    .age-tbl td { padding: 6px 6px 6px 0; border-bottom: 1px solid var(--grey-2); }
    .age-tbl td:first-child { font-size: 13px; font-weight: 500; white-space: nowrap; width: 90px; }
    .age-tbl .inp { height: 36px; font-size: 13px; padding: 0 10px; border-radius: 20px; }
    .age-tbl .cur-wrap .inp { padding-left: 22px; }
    .age-tbl .cur-wrap .cur-sym { font-size: 13px; left: 10px; }

    /* PAYROLL CARDS */
    .payroll-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 16px; }
    .payroll-card { display: flex; align-items: center; gap: 10px; border: 2px solid var(--grey-4); border-radius: var(--radius-md); padding: 14px; cursor: pointer; transition: all 0.2s; }
    .payroll-card:hover { border-color: var(--grey-6); }
    .payroll-card.selected { border-color: var(--teal); background: var(--teal-light); }
    .payroll-card .name { font-size: 14px; font-weight: 600; }
    .payroll-card .icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 800; flex-shrink: 0; }

    /* BTNS */
    .btn-row { display: flex; gap: 12px; margin-top: 8px; }
    .btn-primary { flex: 1; height: 52px; display: flex; align-items: center; justify-content: center; gap: 8px; background: var(--grey-9); border: none; border-radius: var(--radius-full); font-family: var(--font); font-weight: 600; font-size: 15px; color: var(--white); cursor: pointer; transition: background 0.2s; }
    .btn-primary:hover { background: #333; }
    .btn-primary:disabled { background: var(--grey-4); cursor: not-allowed; }
    .btn-primary.teal { background: var(--teal); }
    .btn-primary.teal:hover { background: var(--teal-dark); }
    .btn-primary.green { background: var(--green); }
    .btn-primary.green:hover { background: var(--green-dark); }
    .btn-back { height: 52px; display: flex; align-items: center; justify-content: center; gap: 6px; background: var(--white); border: 1px solid var(--grey-4); border-radius: var(--radius-full); padding: 0 28px; font-family: var(--font); font-weight: 600; font-size: 15px; color: var(--grey-9); cursor: pointer; }
    .btn-back:hover { background: var(--grey-2); }
    .btn-add { width: 100%; height: 40px; display: flex; align-items: center; justify-content: center; gap: 6px; background: var(--white); border: 1px dashed var(--grey-4); border-radius: var(--radius-pill); font-family: var(--font); font-weight: 600; font-size: 13px; color: var(--grey-9); cursor: pointer; }
    .btn-add:hover { background: var(--grey-2); border-color: var(--grey-6); }
    .btn-text { background: none; border: none; font-family: var(--font); font-weight: 600; font-size: 13px; color: var(--teal); cursor: pointer; text-decoration: underline; }
    .btn-remove-sm { display: flex; align-items: center; gap: 3px; font-weight: 600; font-size: 12px; color: var(--red); cursor: pointer; background: none; border: none; font-family: var(--font); }
    .btn-outline { display: flex; align-items: center; justify-content: center; gap: 6px; background: var(--white); border: 1px solid var(--grey-4); border-radius: var(--radius-full); padding: 0 20px; height: 40px; font-family: var(--font); font-weight: 600; font-size: 13px; color: var(--grey-9); cursor: pointer; }
    .btn-outline:hover { background: var(--grey-2); }

    /* CSV ZONE */
    .csv-drop { border: 2px dashed var(--grey-4); border-radius: var(--radius-md); padding: 24px; text-align: center; cursor: pointer; transition: all 0.2s; }
    .csv-drop:hover { border-color: var(--teal); background: var(--teal-light); }
    .csv-drop .icon { font-size: 28px; margin-bottom: 6px; }
    .csv-drop .text { font-size: 14px; font-weight: 600; color: var(--grey-9); }
    .csv-drop .sub { font-size: 12px; color: var(--grey-6); margin-top: 4px; }

    /* REVIEW SECTION */
    .review-section { margin-bottom: 20px; }
    .review-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
    .review-header h3 { font-size: 14px; font-weight: 700; color: var(--grey-9); }
    .review-body { background: var(--grey-2); padding: 14px 18px; border-radius: var(--radius-sm); font-size: 14px; line-height: 1.7; }

    /* DASHBOARD */
    .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
    .dash-stat { background: var(--white); border: 1px solid var(--grey-4); border-radius: var(--radius-md); padding: 16px; }
    .dash-stat .label { font-size: 12px; font-weight: 500; color: var(--grey-6); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
    .dash-stat .value { font-size: 24px; font-weight: 800; }
    .dash-stat .value.teal { color: var(--teal); }
    .status-pill { display: inline-flex; align-items: center; gap: 5px; font-size: 12px; font-weight: 600; padding: 3px 12px; border-radius: var(--radius-full); }
    .status-pill.active { background: var(--green-light); color: var(--green); }
    .status-pill.pending { background: var(--amber-light); color: var(--amber); }
    .status-pill .dot { width: 6px; height: 6px; border-radius: 50%; }
    .status-pill.active .dot { background: var(--green); }
    .status-pill.pending .dot { background: var(--amber); }

    .emp-table { width: 100%; border-collapse: collapse; }
    .emp-table th { font-size: 11px; font-weight: 600; color: var(--grey-6); text-align: left; padding: 8px 0; border-bottom: 1px solid var(--grey-4); text-transform: uppercase; letter-spacing: 0.5px; }
    .emp-table td { padding: 10px 0; border-bottom: 1px solid var(--grey-2); font-size: 14px; }
    .emp-table td:last-child { text-align: right; }

    /* BILLING SUMMARY */
    .billing-table { width: 100%; font-size: 14px; }
    .billing-table tr { border-bottom: 1px solid var(--grey-2); }
    .billing-table td { padding: 10px 0; }
    .billing-table td:last-child { text-align: right; font-weight: 600; }
    .billing-table .total { border-top: 2px solid var(--grey-9); font-size: 16px; font-weight: 800; }

    /* TESTIMONIAL */
    .testimonial { display: flex; gap: 14px; align-items: flex-start; padding: 16px 20px; background: var(--white); border: 1px solid var(--grey-3); border-radius: var(--radius-md); }
    .testimonial .avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--teal-mid); display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; color: var(--teal); flex-shrink: 0; }
    .testimonial .quote { font-size: 14px; color: var(--grey-7); line-height: 1.5; font-style: italic; }
    .testimonial .author { font-size: 12px; font-weight: 600; color: var(--grey-9); margin-top: 6px; font-style: normal; }
    .testimonial .author span { font-weight: 400; color: var(--grey-6); }

    /* FOOTER */
    .footer { width: 1180px; max-width: calc(100% - 32px); padding: 32px 0; text-align: center; z-index: 5; position: relative; }
    .footer p { font-size: 13px; color: var(--grey-6); }

    /* TRANSITIONS */
    .fade-enter-active, .fade-leave-active { transition: opacity 0.2s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }

    /* RESPONSIVE */
    @media (max-width: 740px) {
      .row { flex-direction: column; }
      .col.sm { flex: 1; }
      .hero h1 { font-size: 26px; }
      .card { padding: 20px; }
      .pricing-grid { grid-template-columns: 1fr; }
      .payroll-grid { grid-template-columns: 1fr 1fr; }
      .btn-row { flex-direction: column; }
      .btn-back { width: 100%; }
      .dash-grid { grid-template-columns: 1fr; }
      .emp-row { flex-wrap: wrap; }
      .radio-row { flex-direction: column; gap: 10px; }
      .quick-form { flex-direction: column; }
      .stats-row { flex-direction: column; align-items: center; }
      .logo-row { gap: 20px; }
    }
  </style>
</head>
<body>

<div id="app">
  <div class="page-wrap">
    <div class="bg-circle bg-c1"></div>
    <div class="bg-circle bg-c2"></div>
    <div class="bg-circle bg-c3"></div>

    <!-- HEADER -->
    <header class="header">
      <a href="index.html" class="logo">
        <svg width="40" height="40" viewBox="0 0 44 44" fill="none"><rect width="44" height="44" rx="14" fill="#4299A6"/><path d="M13 14L22 30L31 14" stroke="white" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <span class="logo-text">Vitable</span>
      </a>
      <div class="header-right">
        <div v-if="step >= 2 && step <= 5" class="header-save">
          <span class="dot"></span> Draft saved
        </div>
        <a href="index.html" class="btn-pill">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M12 4L4 12M4 4L12 12" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round"/></svg>
          Browse plans
        </a>
      </div>
    </header>

    <!-- PROGRESS (steps 2-5) -->
    <div class="progress-wrap" v-if="step >= 2 && step <= 5">
      <div class="progress-track" :style="{ '--prog': ((step - 2) / 3 * 100) + '%' }">
        <div v-for="(label, i) in stepNames" :key="i" class="p-step" :class="{ active: step === i + 2, done: step > i + 2, clickable: step > i + 2 }" @click="step > i + 2 && goTo(i + 2)">
          <div class="p-dot">
            <svg v-if="step > i + 2" width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M3 8L7 12L13 4" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <template v-else>{{ i + 1 }}</template>
          </div>
          <span class="p-label">{{ label }}</span>
        </div>
      </div>
    </div>

    <!-- CONTENT -->
    <transition name="fade" mode="out-in">

      <!-- ==================== STEP 1: WELCOME / GET STARTED ==================== -->
      <div v-if="step === 1" key="s1" class="main main-wide">
        <div class="hero">
          <h1>Give your team health benefits<br/><span class="teal">in 5 minutes</span></h1>
          <p>Set a budget. Your employees pick the health plan that works for them. Tax-free for everyone. No brokers, no paperwork.</p>
        </div>

        <!-- Savings banner -->
        <div class="savings-banner">
          <div class="icon">
            <svg width="22" height="22" viewBox="0 0 20 20" fill="none"><path d="M10 2V18M6 6L10 2L14 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div class="text">
            <div class="big">Save an average of $1,200/employee per year</div>
            <div class="sub">vs. traditional group health insurance. You only pay for employees who enroll.</div>
          </div>
        </div>

        <!-- Quick start card -->
        <div class="card" style="padding: 32px;">
          <div style="text-align:center;margin-bottom:24px;">
            <div style="font-size:20px;font-weight:800;margin-bottom:4px;">Get started free</div>
            <div style="font-size:14px;color:var(--grey-6);">No credit card required. Set up your ICHRA and only pay when employees enroll.</div>
          </div>

          <div class="row">
            <div class="col"><label>Work email <span class="req">*</span></label><input class="inp lg" :class="{ err: errs.email }" type="email" v-model="co.email" placeholder="you@company.com" @keyup.enter="next" /><span v-if="errs.email" class="err-msg">Enter a valid work email</span></div>
          </div>
          <div class="row">
            <div class="col"><label>Company name <span class="req">*</span></label><input class="inp lg" :class="{ err: errs.companyName }" v-model="co.name" placeholder="Your company name" @keyup.enter="next" /><span v-if="errs.companyName" class="err-msg">Required</span></div>
            <div class="col">
              <label>Company size <span class="req">*</span></label>
              <div class="dd-wrap">
                <div class="dd-trig" :class="{ open: dd === 'size', ph: !co.size, err: errs.size }" @click.stop="toggle('size')" style="height:52px;font-size:16px;">
                  <span>{{ co.size || 'Employees' }}</span>
                  <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div v-if="dd === 'size'" class="dd-menu" @click.stop>
                  <div v-for="r in sizeRanges" :key="r" class="dd-item" :class="{ sel: co.size === r }" @click="co.size = r; dd = null">{{ r }}</div>
                </div>
              </div>
              <span v-if="errs.size" class="err-msg">Required</span>
            </div>
          </div>

          <div class="btn-row" style="margin-top:16px;">
            <button class="btn-primary green" style="height:56px;font-size:16px;" @click="next">
              Start setup — it's free
              <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M8 4L14 10L8 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
          </div>

          <div style="text-align:center;margin-top:12px;font-size:12px;color:var(--grey-6);">
            <svg style="vertical-align:middle;margin-right:4px;" width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="1" y="1" width="14" height="14" rx="3" stroke="#999" stroke-width="1.5"/><path d="M5 8H11M8 5V7" stroke="#999" stroke-width="1.5" stroke-linecap="round"/></svg>
            Your data is encrypted and secure. We never share your information.
          </div>
        </div>

        <!-- Social proof -->
        <div class="social-proof">
          <div class="label">Trusted by growing companies</div>
          <div class="logo-row">
            <span>Fragment</span>
            <span>Launchpad</span>
            <span>Basecamp</span>
            <span>PeopleTech</span>
            <span>Meridian</span>
          </div>
          <div class="stats-row">
            <div class="stat-chip"><strong>500+</strong> companies</div>
            <div class="stat-chip"><strong>99.9%</strong> enrollment accuracy</div>
            <div class="stat-chip"><strong>4.9/5</strong> employer rating</div>
          </div>
        </div>

        <!-- Testimonial -->
        <div class="testimonial">
          <div class="avatar">SK</div>
          <div>
            <div class="quote">"We switched from a group plan and saved over $40,000 in the first year. Setup took less time than making coffee. Our employees actually have better coverage now."</div>
            <div class="author">Sarah Kim <span>— Head of People, Fragment (32 employees)</span></div>
          </div>
        </div>
      </div>

      <!-- ==================== STEP 2: COMPANY DETAILS + PAYROLL ==================== -->
      <div v-else-if="step === 2" key="s2" class="main">
        <div class="hero">
          <h1>Tell us about your company</h1>
          <p>We'll use this to generate your ICHRA plan documents and ensure compliance</p>
        </div>

        <div class="card">
          <div class="card-title">Company details</div>
          <div class="row">
            <div class="col"><label>Company name <span class="req">*</span></label><input class="inp" :class="{ err: errs.companyName }" v-model="co.name" placeholder="Acme Corp" /></div>
            <div class="col"><label>EIN / Tax ID <span class="req">*</span></label><input class="inp" :class="{ err: errs.ein }" v-model="co.ein" placeholder="XX-XXXXXXX" @input="fmtEin" maxlength="10" /><span v-if="errs.ein" class="err-msg">Format: XX-XXXXXXX</span></div>
          </div>
          <div class="row">
            <div class="col"><label>Street address <span class="req">*</span></label><input class="inp" :class="{ err: errs.street }" v-model="co.street" placeholder="123 Main St" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City <span class="req">*</span></label><input class="inp" :class="{ err: errs.city }" v-model="co.city" placeholder="City" /></div>
            <div class="col">
              <label>State <span class="req">*</span></label>
              <div class="dd-wrap">
                <div class="dd-trig" :class="{ open: dd === 'state', ph: !co.state, err: errs.state }" @click.stop="toggle('state')">
                  <span>{{ co.state || 'Select' }}</span>
                  <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div v-if="dd === 'state'" class="dd-menu" @click.stop>
                  <div v-for="s in states" :key="s" class="dd-item" :class="{ sel: co.state === s }" @click="co.state = s; dd = null">{{ s }}</div>
                </div>
              </div>
            </div>
            <div class="col sm"><label>ZIP <span class="req">*</span></label><input class="inp" :class="{ err: errs.zip }" v-model="co.zip" placeholder="12345" maxlength="5" /></div>
          </div>

          <div class="divider"></div>

          <div class="card-title">Your account</div>
          <div class="row">
            <div class="col"><label>Your full name <span class="req">*</span></label><input class="inp" :class="{ err: errs.name }" v-model="co.contactName" placeholder="Jane Smith" /></div>
            <div class="col"><label>Phone <span class="opt">(optional)</span></label><input class="inp" type="tel" v-model="co.phone" placeholder="(555) 123-4567" /></div>
          </div>

          <div class="divider"></div>

          <div class="card-title">Connect payroll <span class="badge">Optional</span></div>
          <div class="card-desc">Auto-sync employees and deductions. You can skip this and add employees manually.</div>
          <div class="payroll-grid">
            <div v-for="p in payrollProviders" :key="p.id" class="payroll-card" :class="{ selected: co.payroll === p.id }" @click="co.payroll = co.payroll === p.id ? '' : p.id">
              <div class="icon" :style="{ background: p.color }"><span style="color:white;font-size:14px;font-weight:800;">{{ p.abbr }}</span></div>
              <div class="name">{{ p.name }}</div>
            </div>
          </div>
          <div v-if="co.payroll" class="info-box green" style="margin-bottom:0;">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8L7 12L13 4" stroke="#22C55E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <div>{{ payrollProviders.find(p => p.id === co.payroll)?.name }} selected. We'll sync your employee roster and automate deductions after activation.</div>
          </div>

          <div class="btn-row" style="margin-top:20px;">
            <button class="btn-back" @click="back"><svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#1B1C1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Back</button>
            <button class="btn-primary" @click="next">Continue <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M8 4L14 10L8 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
          </div>
        </div>
      </div>

      <!-- ==================== STEP 3: SET BUDGET ==================== -->
      <div v-else-if="step === 3" key="s3" class="main">
        <div class="hero">
          <h1>Set your budget</h1>
          <p>How much will you give each employee for health insurance?</p>
        </div>

        <div class="info-box teal">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#4299A6" stroke-width="1.5"/><path d="M8 7V11" stroke="#4299A6" stroke-width="1.5" stroke-linecap="round"/><circle cx="8" cy="5" r="0.75" fill="#4299A6"/></svg>
          <div><strong>How ICHRA works:</strong> You set a monthly allowance. Employees buy their own health plan on the marketplace, then get reimbursed up to your amount — tax-free for both of you.</div>
        </div>

        <div v-for="(cls, ci) in classes" :key="ci" class="card" style="margin-bottom: 12px;">
          <div class="cls-hdr">
            <h4>{{ cls.name || 'Class ' + (ci + 1) }}</h4>
            <div style="display:flex;gap:10px;align-items:center">
              <span v-if="ci === 0" class="status-pill active"><span class="dot"></span> Default</span>
              <button v-if="ci > 0" class="btn-remove-sm" @click="classes.splice(ci, 1)">
                <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M4 4L12 12M12 4L4 12" stroke="#FF4343" stroke-width="1.5" stroke-linecap="round"/></svg> Remove
              </button>
            </div>
          </div>

          <div v-if="ci > 0" class="row" style="margin-bottom: 12px;">
            <div class="col"><label>Class name</label><input class="inp" v-model="cls.name" placeholder="e.g. Part-time" /></div>
            <div class="col">
              <label>Eligibility</label>
              <div class="dd-wrap">
                <div class="dd-trig" :class="{ open: dd === 'elig-'+ci, ph: !cls.eligibility }" @click.stop="toggle('elig-'+ci)">
                  <span>{{ cls.eligibility || 'Select' }}</span>
                  <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div v-if="dd === 'elig-'+ci" class="dd-menu" @click.stop>
                  <div v-for="e in eligOpts" :key="e" class="dd-item" :class="{ sel: cls.eligibility === e }" @click="cls.eligibility = e; dd = null">{{ e }}</div>
                </div>
              </div>
            </div>
          </div>

          <div class="seg-toggle">
            <button class="seg-btn" :class="{ on: cls.mode === 'simple' }" @click="cls.mode = 'simple'">Single amount</button>
            <button class="seg-btn" :class="{ on: cls.mode === 'family' }" @click="cls.mode = 'family'">By family size</button>
            <button class="seg-btn" :class="{ on: cls.mode === 'age' }" @click="cls.mode = 'age'">Age-banded</button>
          </div>

          <div v-if="cls.mode === 'simple'">
            <div class="row">
              <div class="col">
                <label>Monthly allowance per employee</label>
                <div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="cls.amt.eeOnly" placeholder="0" @input="formatCurrency($event, cls.amt, 'eeOnly')" /></div>
              </div>
            </div>
            <div class="info-box green" v-if="parseNum(cls.amt.eeOnly) > 0">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8L7 12L13 4" stroke="#22C55E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              <div>${{ cls.amt.eeOnly }}/mo covers about <strong>{{ coveragePct(cls.amt.eeOnly) }}</strong> of the average Silver plan in {{ co.state || 'your area' }}.</div>
            </div>
          </div>

          <div v-else-if="cls.mode === 'family'">
            <div class="row">
              <div class="col"><label>Employee only</label><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="cls.amt.eeOnly" placeholder="0" /></div></div>
              <div class="col"><label>Employee + Spouse</label><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="cls.amt.eeSpouse" placeholder="0" /></div></div>
            </div>
            <div class="row">
              <div class="col"><label>Employee + Children</label><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="cls.amt.eeChild" placeholder="0" /></div></div>
              <div class="col"><label>Family</label><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="cls.amt.family" placeholder="0" /></div></div>
            </div>
          </div>

          <div v-else-if="cls.mode === 'age'">
            <table class="age-tbl">
              <thead><tr><th>Age</th><th>Employee</th><th>Family</th></tr></thead>
              <tbody>
                <tr v-for="(b, bi) in cls.bands" :key="bi">
                  <td>{{ b.label }}</td>
                  <td><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="b.ee" placeholder="0" /></div></td>
                  <td><div class="cur-wrap"><span class="cur-sym">$</span><input class="inp" v-model="b.fam" placeholder="0" /></div></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <button class="btn-add" @click="addCls" style="margin-bottom: 12px;">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M8 3V13M3 8H13" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round"/></svg>
          Add employee class
        </button>

        <div class="cost-strip">
          <div class="label">Estimated monthly allowance budget <small>({{ actualEmpCount }} employees)</small></div>
          <div class="amount">{{ monthlyCost }}</div>
        </div>

        <!-- Plan effective date -->
        <div class="card card-sm">
          <div style="font-weight:700;font-size:15px;margin-bottom:12px;">When should benefits start?</div>
          <div class="row">
            <div class="col">
              <label>Plan start month</label>
              <div class="dd-wrap">
                <div class="dd-trig" :class="{ open: dd === 'startMonth', ph: !planStart.month }" @click.stop="toggle('startMonth')">
                  <span>{{ planStart.month || 'Select month' }}</span>
                  <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div v-if="dd === 'startMonth'" class="dd-menu" @click.stop>
                  <div v-for="m in months" :key="m" class="dd-item" :class="{ sel: planStart.month === m }" @click="planStart.month = m; dd = null">{{ m }}</div>
                </div>
              </div>
            </div>
            <div class="col">
              <label>Plan start year</label>
              <div class="dd-wrap">
                <div class="dd-trig" :class="{ open: dd === 'startYear', ph: !planStart.year }" @click.stop="toggle('startYear')">
                  <span>{{ planStart.year || 'Select year' }}</span>
                  <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div v-if="dd === 'startYear'" class="dd-menu" @click.stop>
                  <div v-for="y in years" :key="y" class="dd-item" :class="{ sel: planStart.year === y }" @click="planStart.year = y; dd = null">{{ y }}</div>
                </div>
              </div>
            </div>
          </div>
          <div v-if="planStart.month && planStart.year" style="font-size:13px;color:var(--grey-6);margin-top:4px;">Plan year: <strong style="color:var(--grey-9);">{{ planStart.month }} {{ planStart.year }} — {{ planEndDisplay }}</strong></div>
        </div>

        <div class="btn-row">
          <button class="btn-back" @click="back"><svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#1B1C1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Back</button>
          <button class="btn-primary" @click="next">Continue <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M8 4L14 10L8 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        </div>
      </div>

      <!-- ==================== STEP 4: ADD TEAM ==================== -->
      <div v-else-if="step === 4" key="s4" class="main">
        <div class="hero">
          <h1>Add your team</h1>
          <p>Employees will get an email invite to choose their health plan</p>
        </div>

        <div class="card">
          <div class="card-title">Employees <span class="badge">{{ validEmps.length }} added</span></div>

          <!-- CSV upload zone -->
          <div class="csv-drop" @click="triggerCsv" style="margin-bottom: 16px;">
            <input type="file" ref="csvInput" accept=".csv" style="display:none;" @change="handleCsv" />
            <div class="icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 3V15M12 3L8 7M12 3L16 7" stroke="#4299A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 17V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V17" stroke="#4299A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <div class="text">Upload a CSV file</div>
            <div class="sub">Columns: first_name, last_name, email — or paste from a spreadsheet</div>
          </div>

          <div style="text-align:center;font-size:12px;color:var(--grey-5);margin-bottom:16px;font-weight:500;">— or add manually —</div>

          <div v-for="(emp, ei) in emps" :key="ei" class="emp-row">
            <div class="col"><label v-if="ei === 0">First name</label><input class="inp" v-model="emp.first" placeholder="First name" /></div>
            <div class="col"><label v-if="ei === 0">Last name</label><input class="inp" v-model="emp.last" placeholder="Last name" /></div>
            <div class="col"><label v-if="ei === 0">Work email</label><input class="inp" type="email" v-model="emp.email" placeholder="email@company.com" /></div>
            <div class="remove-btn" @click="emps.length > 1 && emps.splice(ei, 1)" :style="{ marginTop: ei === 0 ? '20px' : '0', visibility: emps.length > 1 ? 'visible' : 'hidden' }">
              <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M4 4L12 12M12 4L4 12" stroke="#757575" stroke-width="1.5" stroke-linecap="round"/></svg>
            </div>
          </div>

          <div style="display:flex;gap:12px;margin-top:8px;margin-bottom:16px">
            <button class="btn-add" style="flex:1" @click="emps.push({ first: '', last: '', email: '' })">
              <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M8 3V13M3 8H13" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round"/></svg>
              Add employee
            </button>
          </div>

          <div class="info-box amber">
            <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><path d="M8 1L15 14H1L8 1Z" stroke="#F59E0B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 6V9" stroke="#F59E0B" stroke-width="1.5" stroke-linecap="round"/><circle cx="8" cy="11.5" r="0.75" fill="#F59E0B"/></svg>
            <div>You can always add more employees later from your dashboard. At least 1 employee is needed to activate.</div>
          </div>

          <div class="btn-row">
            <button class="btn-back" @click="back"><svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#1B1C1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Back</button>
            <button class="btn-primary" @click="next">Continue <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M8 4L14 10L8 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
          </div>
        </div>
      </div>

      <!-- ==================== STEP 5: REVIEW + ACTIVATE ==================== -->
      <div v-else-if="step === 5" key="s5" class="main">
        <div class="hero">
          <h1>Review and activate</h1>
          <p>Double-check everything, then go live. Your team can start enrolling today.</p>
        </div>

        <div class="card">
          <!-- Company -->
          <div class="review-section">
            <div class="review-header">
              <h3>Company</h3>
              <button class="btn-text" @click="goTo(2)">Edit</button>
            </div>
            <div class="review-body">
              <strong>{{ co.name }}</strong><br/>
              {{ co.street }}, {{ co.city }}, {{ co.state }} {{ co.zip }}<br/>
              {{ co.contactName }} &middot; {{ co.email }}
              <span v-if="co.payroll"><br/>Payroll: {{ payrollProviders.find(p => p.id === co.payroll)?.name }}</span>
            </div>
          </div>

          <!-- Allowances -->
          <div class="review-section">
            <div class="review-header">
              <h3>Budget &amp; Allowances</h3>
              <button class="btn-text" @click="goTo(3)">Edit</button>
            </div>
            <div class="review-body">
              <div v-for="(cls, ci) in classes" :key="ci" style="margin-bottom:8px;">
                <strong>{{ cls.name || 'Class ' + (ci + 1) }}</strong>
                <span v-if="cls.mode === 'simple'"> — ${{ cls.amt.eeOnly || '0' }}/mo per employee</span>
                <div v-if="cls.mode === 'family'" style="margin-top:4px;font-size:13px;color:var(--grey-7);">
                  Employee only: ${{ cls.amt.eeOnly || '0' }}/mo &middot;
                  +Spouse: ${{ cls.amt.eeSpouse || '0' }}/mo &middot;
                  +Children: ${{ cls.amt.eeChild || '0' }}/mo &middot;
                  Family: ${{ cls.amt.family || '0' }}/mo
                </div>
                <div v-if="cls.mode === 'age'" style="margin-top:4px;font-size:13px;color:var(--grey-7);">
                  <div v-for="b in cls.bands" :key="b.label" style="display:inline-block;margin-right:12px;">
                    {{ b.label }}: ${{ b.ee || '0' }}/${{ b.fam || '0' }}
                  </div>
                </div>
              </div>
              <div v-if="planStart.month && planStart.year" style="margin-top:4px;font-size:13px;color:var(--grey-7);">Plan year: {{ planStart.month }} {{ planStart.year }} — {{ planEndDisplay }}</div>
            </div>
          </div>

          <!-- Team -->
          <div class="review-section">
            <div class="review-header">
              <h3>Team ({{ validEmps.length }} employees)</h3>
              <button class="btn-text" @click="goTo(4)">Edit</button>
            </div>
            <div class="review-body">
              <div v-for="(emp, ei) in validEmps.slice(0, 5)" :key="ei">{{ emp.first }} {{ emp.last }} &middot; {{ emp.email }}</div>
              <div v-if="validEmps.length > 5" style="color:var(--grey-6);margin-top:4px;">+{{ validEmps.length - 5 }} more</div>
            </div>
          </div>

          <!-- Billing breakdown -->
          <div class="review-section">
            <div class="review-header">
              <h3>Monthly cost breakdown</h3>
            </div>
            <table class="billing-table">
              <tr>
                <td>Allowance budget <small style="color:var(--grey-6);">({{ actualEmpCount }} employees)</small></td>
                <td>{{ monthlyCost }}</td>
              </tr>
              <tr>
                <td>Platform fee <small style="color:var(--grey-6);">(${{ perEmployeeFee }}/enrolled employee)</small></td>
                <td>${{ platformFee }}</td>
              </tr>
              <tr class="total">
                <td>Estimated monthly total</td>
                <td>{{ totalMonthlyCost }}</td>
              </tr>
            </table>
          </div>

          <div class="info-box purple" style="margin-top:4px;">
            <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#8B5CF6" stroke-width="1.5"/><path d="M8 7V11" stroke="#8B5CF6" stroke-width="1.5" stroke-linecap="round"/><circle cx="8" cy="5" r="0.75" fill="#8B5CF6"/></svg>
            <div><strong>You won't be charged until employees enroll.</strong> You'll only pay the platform fee for employees who actually select a plan. Allowance reimbursements happen after employees submit claims.</div>
          </div>

          <div class="chk-row" @click="agreed = !agreed">
            <div class="chk-box" :class="{ on: agreed }">
              <svg v-if="agreed" width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M3 8L7 12L13 4" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <div class="chk-text">I agree to the <a href="#">ICHRA Plan Terms</a> and <a href="#">Service Agreement</a>. I understand employees will be invited to enroll and reimbursements will begin on the plan effective date.</div>
          </div>

          <div class="btn-row">
            <button class="btn-back" @click="back"><svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#1B1C1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Back</button>
            <button class="btn-primary green" :disabled="!agreed" @click="activate">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M3 10L8 15L17 5" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Activate — it's free until employees enroll
            </button>
          </div>
        </div>
      </div>

      <!-- ==================== STEP 6: LIVE DASHBOARD ==================== -->
      <div v-else-if="step === 6" key="s6" class="main">
        <div class="info-box green" style="margin-bottom:0">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 10L9 14L15 6" stroke="#22C55E" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div><strong>Your ICHRA is live!</strong> Enrollment invitations have been sent to {{ validEmps.length }} employee{{ validEmps.length !== 1 ? 's' : '' }}. They can start choosing their health plan now.</div>
        </div>

        <div class="card">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
            <h2 style="font-size:22px;font-weight:800">{{ co.name }}</h2>
            <span class="status-pill active"><span class="dot"></span> ICHRA Active</span>
          </div>

          <div class="dash-grid">
            <div class="dash-stat">
              <div class="label">Employees invited</div>
              <div class="value">{{ validEmps.length }}</div>
            </div>
            <div class="dash-stat">
              <div class="label">Monthly allowance budget</div>
              <div class="value teal">{{ monthlyCostActual }}</div>
            </div>
            <div class="dash-stat">
              <div class="label">Platform fee</div>
              <div class="value">${{ platformFeeActual }}/mo</div>
            </div>
            <div class="dash-stat">
              <div class="label">Plan year</div>
              <div class="value" style="font-size:18px">{{ planStart.month && planStart.year ? planStart.month + ' ' + planStart.year + ' — ' + planEndDisplay : 'Jan 2026 — Dec 2026' }}</div>
            </div>
          </div>

          <div class="divider"></div>

          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <div style="font-weight:700;font-size:15px">Employee enrollment status</div>
            <button class="btn-add" style="width:auto;padding:0 14px;height:32px;border-style:solid" @click="emps.push({ first: '', last: '', email: '' })">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M8 3V13M3 8H13" stroke="#1B1C1E" stroke-width="1.5" stroke-linecap="round"/></svg>
              Add
            </button>
          </div>

          <table class="emp-table">
            <thead><tr><th>Employee</th><th>Email</th><th>Status</th></tr></thead>
            <tbody>
              <tr v-for="(emp, ei) in validEmps" :key="ei">
                <td style="font-weight:600">{{ emp.first }} {{ emp.last }}</td>
                <td style="color:var(--grey-6)">{{ emp.email }}</td>
                <td><span class="status-pill pending"><span class="dot"></span> Invited</span></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card card-sm">
          <div style="font-weight:700;margin-bottom:8px">Quick actions</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn-pill">Download plan documents</button>
            <button class="btn-pill">Resend invitations</button>
            <button class="btn-pill">Edit allowances</button>
            <button class="btn-pill">Billing settings</button>
          </div>
        </div>
      </div>

    </transition>

    <footer class="footer">
      <p>&copy; 2026 Vitable Health. All rights reserved.</p>
    </footer>
  </div>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script>
const { createApp, ref, reactive, computed, watch, onMounted } = Vue;

createApp({
  setup() {
    const step = ref(1);
    const dd = ref(null);
    const stepNames = ['Company', 'Budget', 'Team', 'Activate'];

    // ===== SAVE / RESTORE =====
    const STORAGE_KEY = 'vitable_ichra_draft_v2';
    const DASH_KEY = 'vitable_ichra_dashboard';

    function saveDraft() {
      try {
        const data = { step: step.value, co: JSON.parse(JSON.stringify(co)), classes: JSON.parse(JSON.stringify(classes)), emps: JSON.parse(JSON.stringify(emps)), planStart: JSON.parse(JSON.stringify(planStart)) };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      } catch (e) {}
    }
    function loadDraft() {
      try {
        // Check for activated dashboard first
        const dashRaw = localStorage.getItem(DASH_KEY);
        if (dashRaw) {
          const data = JSON.parse(dashRaw);
          if (data.co) Object.assign(co, data.co);
          if (data.classes?.length) { classes.length = 0; data.classes.forEach(c => classes.push(c)); }
          if (data.emps?.length) { emps.length = 0; data.emps.forEach(e => emps.push(e)); }
          if (data.planStart) Object.assign(planStart, data.planStart);
          step.value = 6;
          return true;
        }
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return false;
        const data = JSON.parse(raw);
        if (data.step) step.value = Math.min(data.step, 5);
        if (data.co) Object.assign(co, data.co);
        if (data.classes?.length) { classes.length = 0; data.classes.forEach(c => classes.push(c)); }
        if (data.emps?.length) { emps.length = 0; data.emps.forEach(e => emps.push(e)); }
        if (data.planStart) Object.assign(planStart, data.planStart);
        return true;
      } catch (e) { return false; }
    }

    // ===== COMPANY =====
    const co = reactive({ name: '', ein: '', street: '', city: '', state: '', zip: '', size: '', contactName: '', email: '', phone: '', payroll: '' });
    const errs = reactive({});
    const states = ['Alabama','Alaska','Arizona','Arkansas','California','Colorado','Connecticut','Delaware','Florida','Georgia','Hawaii','Idaho','Illinois','Indiana','Iowa','Kansas','Kentucky','Louisiana','Maine','Maryland','Massachusetts','Michigan','Minnesota','Mississippi','Missouri','Montana','Nebraska','Nevada','New Hampshire','New Jersey','New Mexico','New York','North Carolina','North Dakota','Ohio','Oklahoma','Oregon','Pennsylvania','Rhode Island','South Carolina','South Dakota','Tennessee','Texas','Utah','Vermont','Virginia','Washington','West Virginia','Wisconsin','Wyoming'];
    const sizeRanges = ['1-5', '6-10', '11-25', '26-50', '51-100', '100+'];

    const payrollProviders = [
      { id: 'gusto', name: 'Gusto', abbr: 'G', color: '#F45D48' },
      { id: 'adp', name: 'ADP', abbr: 'A', color: '#D0271D' },
      { id: 'paychex', name: 'Paychex', abbr: 'P', color: '#004B87' },
      { id: 'quickbooks', name: 'QuickBooks', abbr: 'Q', color: '#2CA01C' },
      { id: 'rippling', name: 'Rippling', abbr: 'R', color: '#FFC629' },
      { id: 'other', name: 'Other', abbr: '...', color: '#999' },
    ];

    function fmtEin() { let v = co.ein.replace(/[^0-9]/g, ''); if (v.length > 2) v = v.slice(0, 2) + '-' + v.slice(2, 9); co.ein = v; }

    // ===== PLAN START =====
    const planStart = reactive({ month: '', year: '' });
    const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    const years = ['2025', '2026', '2027'];

    const planEndDisplay = computed(() => {
      if (!planStart.month || !planStart.year) return '';
      const mi = months.indexOf(planStart.month);
      const endMonth = mi === 0 ? 'December' : months[mi - 1];
      const endYear = mi === 0 ? planStart.year : String(Number(planStart.year) + 1);
      return endMonth + ' ' + endYear;
    });

    // ===== CLASSES =====
    const eligOpts = ['Full-time', 'Part-time', 'Salaried', 'Hourly', 'All employees'];
    function makeBands() { return [{ label: '<25', ee: '', fam: '' }, { label: '25-34', ee: '', fam: '' }, { label: '35-44', ee: '', fam: '' }, { label: '45-54', ee: '', fam: '' }, { label: '55+', ee: '', fam: '' }]; }
    function makeCls(name, elig) { return { name: name || '', eligibility: elig || '', mode: 'simple', amt: { eeOnly: '500', eeSpouse: '', eeChild: '', family: '' }, bands: makeBands() }; }
    const classes = reactive([makeCls('All Employees', 'Full-time')]);
    function addCls() { classes.push(makeCls('', '')); }

    // ===== EMPLOYEES =====
    const emps = reactive([
      { first: '', last: '', email: '' },
      { first: '', last: '', email: '' },
      { first: '', last: '', email: '' },
    ]);
    const validEmps = computed(() => emps.filter(e => e.first.trim() && e.email.trim()));

    // CSV handling
    const csvInput = ref(null);
    function triggerCsv() { csvInput.value?.click(); }
    function handleCsv(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (e) => {
        const text = e.target.result;
        const lines = text.split('\n').filter(l => l.trim());
        if (lines.length < 2) return;
        // Parse header
        const header = lines[0].toLowerCase().split(',').map(h => h.trim().replace(/"/g, ''));
        const firstIdx = header.findIndex(h => h.includes('first'));
        const lastIdx = header.findIndex(h => h.includes('last'));
        const emailIdx = header.findIndex(h => h.includes('email'));
        if (emailIdx === -1) return;
        // Clear empty rows and add parsed ones
        const nonEmpty = emps.filter(e => e.first.trim() || e.email.trim());
        emps.length = 0;
        nonEmpty.forEach(e => emps.push(e));
        for (let i = 1; i < lines.length; i++) {
          const cols = lines[i].split(',').map(c => c.trim().replace(/"/g, ''));
          if (cols[emailIdx]) {
            emps.push({
              first: firstIdx >= 0 ? cols[firstIdx] || '' : '',
              last: lastIdx >= 0 ? cols[lastIdx] || '' : '',
              email: cols[emailIdx] || ''
            });
          }
        }
        if (emps.length === 0) emps.push({ first: '', last: '', email: '' });
      };
      reader.readAsText(file);
      event.target.value = '';
    }

    // ===== COST =====
    const actualEmpCount = computed(() => {
      const v = validEmps.value.length;
      return v > 0 ? v : estimatedEmpCount.value;
    });

    const estimatedEmpCount = computed(() => {
      const s = co.size;
      if (s === '1-5') return 3;
      if (s === '6-10') return 8;
      if (s === '11-25') return 18;
      if (s === '26-50') return 38;
      if (s === '51-100') return 75;
      if (s === '100+') return 100;
      return 5;
    });

    function parseNum(v) { return parseFloat(String(v).replace(/,/g, '')) || 0; }

    const monthlyCost = computed(() => {
      let total = 0;
      for (const cls of classes) { total += parseNum(cls.amt.eeOnly) * actualEmpCount.value; }
      return '$' + Math.round(total).toLocaleString('en-US');
    });

    const monthlyCostActual = computed(() => {
      let total = 0;
      const count = validEmps.value.length || 1;
      for (const cls of classes) { total += parseNum(cls.amt.eeOnly) * count; }
      return '$' + Math.round(total).toLocaleString('en-US');
    });

    const perEmployeeFee = computed(() => {
      const count = actualEmpCount.value;
      if (count >= 50) return 35;
      return 45;
    });

    const platformFee = computed(() => {
      return (perEmployeeFee.value * actualEmpCount.value).toLocaleString('en-US');
    });

    const platformFeeActual = computed(() => {
      const count = validEmps.value.length || 1;
      return (perEmployeeFee.value * count).toLocaleString('en-US');
    });

    const totalMonthlyCost = computed(() => {
      let allowance = 0;
      for (const cls of classes) { allowance += parseNum(cls.amt.eeOnly) * actualEmpCount.value; }
      const platform = perEmployeeFee.value * actualEmpCount.value;
      return '$' + Math.round(allowance + platform).toLocaleString('en-US');
    });

    function coveragePct(amt) {
      const v = parseNum(amt);
      const avg = 620;
      const pct = Math.min(Math.round((v / avg) * 100), 100);
      return pct + '%';
    }

    function formatCurrency(event, obj, key) {
      // Allow typing, just strip non-numeric except dots
      let v = event.target.value.replace(/[^0-9.]/g, '');
      obj[key] = v;
    }

    // ===== NAV =====
    const agreed = ref(false);

    function validate() {
      Object.keys(errs).forEach(k => delete errs[k]);
      if (step.value === 1) {
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(co.email)) errs.email = true;
        if (!co.name.trim()) errs.companyName = true;
        if (!co.size) errs.size = true;
        return Object.keys(errs).length === 0;
      }
      if (step.value === 2) {
        if (!co.name.trim()) errs.companyName = true;
        if (!/^\d{2}-\d{7}$/.test(co.ein)) errs.ein = true;
        if (!co.street.trim()) errs.street = true;
        if (!co.city.trim()) errs.city = true;
        if (!co.state) errs.state = true;
        if (!/^\d{5}$/.test(co.zip)) errs.zip = true;
        if (!co.contactName.trim()) errs.name = true;
        return Object.keys(errs).length === 0;
      }
      return true;
    }

    function next() {
      if (!validate()) return;
      if (step.value < 5) { step.value++; window.scrollTo({ top: 0, behavior: 'smooth' }); saveDraft(); }
    }
    function back() { if (step.value > 1) { step.value--; window.scrollTo({ top: 0, behavior: 'smooth' }); } }
    function goTo(n) { step.value = n; window.scrollTo({ top: 0, behavior: 'smooth' }); }
    function toggle(id) { dd.value = dd.value === id ? null : id; }

    function activate() {
      if (!agreed.value) return;
      step.value = 6;
      localStorage.removeItem(STORAGE_KEY);
      // Persist dashboard state
      try {
        const data = { co: JSON.parse(JSON.stringify(co)), classes: JSON.parse(JSON.stringify(classes)), emps: JSON.parse(JSON.stringify(emps)), planStart: JSON.parse(JSON.stringify(planStart)) };
        localStorage.setItem(DASH_KEY, JSON.stringify(data));
      } catch (e) {}
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Close dropdowns
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.dd-wrap') && !e.target.closest('.dd-trig')) dd.value = null;
    });

    // Auto-save
    watch([step, () => JSON.stringify(co), () => JSON.stringify(classes), () => JSON.stringify(emps), () => JSON.stringify(planStart)], () => { if (step.value >= 1 && step.value <= 5) saveDraft(); }, { deep: true });

    // Load on init
    loadDraft();

    return {
      step, dd, stepNames,
      co, errs, states, sizeRanges, fmtEin, payrollProviders,
      planStart, months, years, planEndDisplay,
      eligOpts, classes, addCls,
      emps, validEmps, csvInput, triggerCsv, handleCsv,
      actualEmpCount, estimatedEmpCount, parseNum,
      monthlyCost, monthlyCostActual, platformFee, platformFeeActual, perEmployeeFee, totalMonthlyCost, coveragePct, formatCurrency,
      agreed,
      next, back, goTo, toggle, activate
    };
  }
}).mount('#app');
</script>
</body>
</html>
